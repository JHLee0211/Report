# 블록체인

- #### 유래

  - 1991년, 스튜어트 하버와 W.스콧 스토르네타가 시간 순서에 따라 타임스탬프를 연결해 데이터 위조를 방지하는 개념을 제시
  - 전자 문서의 생성 / 수정 시간 기록의 위조를 방지하기 위한 기법으로 개념 제시 >> 이후 블록체인에 영향

- #### 핵심 요소

  ```
   분산화된 구조 - 단일 실패점(point of failure)이 존재하지 않음
   장부의 다자간 공유 - 소수의 인물 / 세력에 의한 조작 방지
   암호화된 연결 - 전 페이지(블록)와 암호로 연결
  ```

  ##### 매우 많은 수의 사람이 같은 거래 장부를 가지고 있음 >> 개인 또는 소수가 조작 불가

  

### 암호 화폐와 블록체인

---

- 새로 추가되는 거래 장부가 이전 페이지와 암호로 연결되어 있음
  - 이 암호를 찾는 행위 >> 채굴
  - 채굴에 따른 보상이 비트코인! (암호화폐)
- 사토시 나카모토 : 비트코인 창시자이며, 개인인지 단체인지 불명확

- 가상 화폐는 '게임머니', '도토리' 등을 포함하는 말이므로 암호화폐가 정확

```
   이중 지불(double-spending) 
    - 암호화폐는 디지털 코드이기 때문에 지불해도 원본 코드가 남아있음
    - 비트코인은 문제를 블록체인을 이용해 이중 지불 문제를 해결
    - 시간 순서대로 모든 거래기록이 적힌 장부를 네트워크상의 모든 노드(유저)가 공유
```

- #### 정리

```
 거래 장부(블록) + 암호로 연결되어 있는 모양이 체인 형태		// 블록 체인
 암호 화폐는 오직 암호를 찾은 보상으로 생성됨
 
 가상화폐 vs 암호화폐 vs 전자자산
 - 가상화폐(virtual currency) : 가상 세계에서 활용되는 모든 거래수 (도토리, 하트, 보석 캐시 등)
 - 암호화폐(cryptocurrency)   : 암호화(encryption) 기술을 활용해 설계된 거래 수단 지칭
 - 전자자산(digital asset)    : 블록체인 기반의 화폐를 넘는 다양한 성격을 설명하기 위한 신용어
 								(= 암호자산(crypto-asset), 가상통화 등) 
```



### 이더리움과 스마트 컨트랙트

---

- 비트코인은 입/출금 한 가지 기능만 지원

  - 이에 따라 후발주자들이 전송/계약/투표 기능 등 여러 기능을 추가한 화폐를 만듦
  
  - 10가지의 기능을 가진 코인이 나오면 이후 11가지 기능을 가진 코인이 나옴
  
  - 그렇다면 스마트폰 앱처럼 기술을 추가할 수 있는 코인은 없을까?
  
    - 러시아의 청년 '비탈릭 부테린'이 이더리움 네트워크 개발
    
    
  
- #### 이더리움 네트워크와 계약서

  - 이더리움 네트워크는 참여자들이 특정한 방식에 따라 명령어들을 실행할 수 있음

  ```
  ex) A가 B에게 10시간 후 1 BTC 전송
      A가 B에게 전송이 확인되면 B는 C에게 2 BTC 전송
  ```
  
  - 비트코인은 '지갑'만 있지만, 이더리움은 '지갑'과 '계약서'가 있음
  
    
  
- #### 스마트 컨트랙트

  - 1994년 닉 자보가 제시 - 프로그램을 통해 계약을 이행하여 제 3자에 대한 의존도 줄이기 목표

  - 완전히 디지털화, 자동화된 계약서

  - 계약을 집행하기 위한 추가 자원이나 인력 낭비가 없어 중간비용 절감
  
    - ex) 자판기는 조건이 갖춰지면 3자 개입 없이 계약이 이행되는 아날로그 스마트 컨트랙트의 예시임
  
  - 솔리디티(Solidity) : 이더리움 스마트 컨트랙트 프로그래밍 언어
  
    
  
- #### 댑(dApp, decentralized App)

  - 튜링완전언어 지원 - 프로그래밍 언어 중에서 제약이 없음
  - 앱을 프로그래밍하여 이더리움에서 구동하는 것
  - 기존의 App과 구별하며, '분산화' 의 특성을 살린 작명

  

- 비트코인이 기존의 금융권을 혁신하는 시스템을 목표로 한다면, 이더리움은 기존의 인터넷을 대체하는 새로운 네트워크를 목표로 함



### 블록체인과 암호화폐

---

- 블록체인 - 꽃 / 암호화폐 - 꿀 / 나비 - 유저
  - 꽃은 생식을 위해 꿀을 보상으로 나비를 꾀어낸다
  - 블록체인은 확장을 위해 암호화폐를 보상으로 유저를 꾀어낸다

####  암호화폐와 블록체인은 다른 것

```
  블록체인은 사용자들끼리 합의를 통해 데이터를 관리하는 새로운 방식을 일컫는 말
  어떤 데이터가 참인지 합의하고, 새로운 블록에 기억해두는 것
  데이터를 확인하고 기록해줄 참여자가 없으면 블록체인 네트워크가 유지될 수 없으므로 '암호화폐 보상'을 냄
```

####  보상의 선순환

```
참여자들이 성실하게 참여할수록 블록체인 네트워크가 건강하게 성장
 → 네트워크가 건강하게 성장할수록 암호화폐에 높은 가치 부여
 → 보상이 커질수록 합의에 참여하려는 사람들이 늘어남
 → 이러한 선순환을 통해 블록체인 네트워크는 자발적으로 유지되는 생태계 생성
```

```
즉, 암호화폐와 블록체인은 뗄 수 없는 관계이며, 블록체인은 좋은데 암호화폐는 나쁘다는 말은 있을 수 없음!
```

#### 프라이빗 블록체인

```
 퍼블릭 블록체인 : 거래 내역이 만천하에 공개됨
 프라이빗 블록체인 : 허가받은 사용자만이 거래내역 확인 가능
```

- 거래 내역을 보증해줄 중간자가 필요 없다는 장점 떄문에 블록체인에 관심을 가지는 기업이 증가
  - 본래 암호화폐는 블록체인 거래 내역을 기록하고 확인해주는 것이 대가인데, 기업이 구성하는 프라이빗 블록체인은 굳이 보상이 없어도 참여자들이 존재하므로 프라이빗 블록체인 구성 가능



### 암호화폐는 어떻게 구하나?

---

- ##### 암호화폐를 갖는 두 가지 방법

```
 1. 채굴처럼 프로토콜로 정한 방식에 따라 얻는 것
 2. 다른 사람에게 구입하는 방법
```
- 암호화폐 거래소에서 구매하며, 구입한 암호화폐는 거래소에 두거나 다른 지갑(다른 거래소, 하드월렛 등)에 전송하거나, 필요할 때 매도해 원화로 교환할 수 있음

- 암호화폐 지갑
  - 매우 긴 숫자와 알파벳의 조합으로 주소를 정함
  - 최근에는 개별 ID 형식이나 QR코드를 사용하여 편의성을 높이기도 함
  
- 암호화폐 보관법
  - 거래소에 보관 : 상대적으로 매수, 매도가 편하나 거래소가 해킹 / 파산하면 사라질 수 있다.

  - 컴퓨터/모바일에 보관 : 하드웨어 보안 관리에 철저한 경우 안전하나, 보완 관리가 소홀하다면 해킹 위험

  - 하드웨어 지갑에 보관 : USB처럼 생긴 전용 하드웨어 보관, 가장 안전하나 신속한 거래가 어려움

    
  
- 암호화폐 기술의 근본역량

  ```
  합의알고리즘 | 블록생성시간 | 전송속도 | 노드개수
  ```

  

  

### 블록체인 프리퀄

---

- 데이비드 차움

  - 암호학의 아버지, 암호 기술을 이용한 디지털 화폐 회사 디지캐시 설립
  - 디지캐시 : 디지털 화폐 E-Cash를 서비스, 거래 내역을 다른 사람이 알 수 없도록 익명성 보장
  - 대중이 보안보다는 편의성을 우선시하였기 때문에 파산

- 사이퍼펑크

  - 1980년대 후반, 데이비드 차움에게 영감을 받은 운동가들
  - 대규모 감시와 검열에 맞서 개인의 자유와 안전을 지키기 위한 방안으로 암호화 기술을 활용해야 한다고 주장하는 사람들의 연합

- 디코노미

  - 2018년 4월부터 개최된 분산화 경제 관련 포럼 시리즈
  - 암호화 기술, 블록체인 기술, 분산화 네트워크 등 다양한 주제에 대해 발표와 토론 진행
  - 2019년 4월 4~5일, 서울 장충체육관에서 '디코노미 2019' 개최

  

- 이전 암호화폐 기술 및 시도

```
 B 머니
  - 1998년, 사이퍼펑크 운동가 웨이 다이가 발표
  - P2P 거래 및 분산원장 시스템을 접목, 실제 시스템이 만들어지진 않음
  - 웨이 다이는 Cryto++ 이라는 C++ 기반의 암호학 관련 알고리즘 저장소 개발 (무료, 오픈소스)
 
 작업 증명(PoW, Proof of Work) 개념
  - 1997년 아담 백(Adam Back)이 해시캐시라는 시스템에 도입
  - 스팸메일을 막기 위해 메일을 보내는 사람이 시간을 들여 작업 증명을 해야만 해시캐시 인증을 받도록 함
  
 비트골드
  - 닉 자보(Nick Szabo)는 PoW 기반의 비트골드 고안
  - 황금이 중앙관리 개체 없이도 가치를 유지하는 것을 온라인으로 구현하려 시도한 시스템
```

- 비트코인의 탄생

```
 2008년 10월 31일, 전 세계의 암호학 관련자 수백 명에게 사토시 나카모토가 발신한 이메일이 도착
 '신뢰할 만한 제3자 중개인 없이 완전히 당사자끼리 운영되는 새로운 전자 통화 시스템을 연구하고 있습니다.'
 비트코인의 개념을 설명한 9page 짜리 논문이었으며, 2달 후 2009년 1월 3일부터 실제로 발행되었다.
 정해진 프로토콜에 따라 관리하는 사람 없이 자동으로 발행되며 2140년에 2,100만개로 생성이 종료된다.
```

- 탈중앙화 전자화폐는 이미 여러번 실패하였고, 무명의 개발자가 개발했다는 소식은 곧 묻히게 되었다.
- 하지만, 할 피니라는 사람이 두 번째 노드를 만들어 사카모토와 비트코인을 주고받았고, 이후 더 많은 노드들이 생겨나며 비트코인 생태계가 확장되게 되었다.



### 블록체인 용어

---

```
 블록체인에서 블록을 이어가기 위해선 합의가 필요하다. - 증명 방식 필요
```

- #### 비트코인 컨센서스 알고리즘 PoW (Proof of Work, 작업 증명)

  - 단순 작업으로 블록을 생성 >> 해시 키 값을 맞히기 위한 무작위 방식
  - 전체 해시 양이 늘어나면 키를 찾는 시간이 빨라짐
    - 비트코인은 '난이도'를 조정해 블록 생성 시간을 일정하게 조절한다.
  - 채굴하는 코인은 모두 PoW 방식

- #### 블록체인 컨센서스 알고리즘 PoS (Proof of Stake, 지분 증명)

  - 채굴에 들어가는 어마어마한 유지비용(전력, 장비 가격 등)의 해결책을 위해 등장

  - 해시 독점 문제를 해결하기 위한 방식  >> 51% 공격 : 블록체인 위변조 가능
    
  - 코인 보유량 / 보유 코인의 나이에 따라 추가적으로 블록 생성 >> 신규 발행 코인을 아낀다

  - 이더리움은 PoW 에서 PoS 로 변환한 코인임

  - Nothing at stake(이래도 그만 저래도 그만인 상황) 문제가 있음

    - 블록체인에서 포크가 생기면 합의를 통해 어느 포크가 '진리'인지 결정하고, 나머지 버림
    - 순수 PoS에서는 '이게 진짜'라는 기회비용이 거의 없기 때문에, 이중 지불을 가능하게 할 수 있다는 주장이 Nothing at stake 문제임
    - PoS를 이용하는 각 블록체인들은 이 문제를 위해 각자의 수단을 도입한 상태이다.

    

  - DPoS (Delegated Proof of Stake : 위임형 지분 증명)
    - 지분을 가진 사람들이 정해진 수의 "증인"을 투표를 통해 블록 생성자를 선정
    - Steam, EOS 등에서 사용

- ##### PoI (Proof of Importance, 중요도 증명) 

  - 블록체인에 블록을 추가할 수 있는 자격을 부여하는 시스템
  - 지분 증명과 유사하지만 코인 보유량 외 실제 코인 사용량, 블록 생성을 위해 담보로 잡아둔(vested) 코인 양 등 여러 변수를 조합해 블록체인 기여도를 파악하는 방식



- #### 소프트포크

  - 일종의 소프트웨어 업그레이드로, 업그레이드 하지 않아도 블록체인 참여에 문제 없으나 특정 기능 사용에 제약이 발생할 수 있음

- #### 하드포크

  - 블록체인 컨센서스가 이루어지지 않으면 체인이 분기되기도 함

    - 이처럼 분기된 블록체인은 각자의 방향에 따라 개발되어 서로 호환되지 X
    - 즉, 기존에 존재하던 블록체인과 완전히 갈라서서 새로운 블록체인이 만들어지는 것
    - 이전에 사용하던 소프트웨어로 새로운 블록의 거래 내역 확인할 수 없음

  - 합의를 통해 별도로 파생되는 블록체인 없이 하드포크가 진행되는 경우도 있음

    ex) 비트코인 / 비트코인 캐시, 이더리움 / 이더리움 클래식 등

    

### 국내 블록체인 현황

---

####   NH농협은행 (농가소득 5천만과 연관지을 건 없을까?)

- 2018.08.08 암호화폐 거래소 코인원과 NH농협은행이 실명확인 계좌 발급에 대한 재계약 완료

   (http://www.thebchain.co.kr/news/articleView.html?idxno=1222)

   빗썸 또한 NH와 실명계좌 발급 계약 연장

   (http://www.thebchain.co.kr/news/articleView.html?idxno=1569)

- 코인원은 정부 방침에 따라 2018년 1월 30일부터 NH농협은행과 실명확인 계좌를 운영 중

  - 코인원은 NH농협은행의 실명확인 계좌를 통해 신규계좌 개설 가능

- 실명확인 계좌

  - 본인명의로 개설된 은행계좌와 코인원 거래소 원화 입출금을 1대 1로 연동한 방식으로 코인원과 NH농협은행 간에 구축된 시스템
  - 실명확인 계좌는 은행에서 직접 은행계좌의 명의자와 코인원 계정 명의자를 확인해 명의도용을 방지할 수 있음
  - 코인원으로 입금된 원화 자산은 100% NH농협은행에 보관되며, 양사는 매주 원화 입출금 내역을 확인해 안전한 관리 진행
  
- NH농협銀, 'P2P 금융증서 블록체인 서비스' 출시…은행권 최초 (19.4.3)

   (https://www.tokenpost.kr/article-7144)

   

#### BNK

- BNK금융 조직개편·임원 인사…블록체인 전담조직 신설 (19.12.17)

  (http://www.thebchain.co.kr/news/articleView.html?idxno=6473)



#### IBK

- 블록체인의 이해와 금융업의 활용에 대한 고찰 (17.7)

  (http://research.ibk.co.kr/research/board/economy/download/201200/1)

#### KISA

- KISA, 노조위원장 선거에 블록체인 기술 도입한다 (19.12.16)

  (http://www.thebchain.co.kr/news/articleView.html?idxno=6462)

  

### 긍정적 입장

---

#### 블록체인 시장 성장률

- 국내 블록체인 시장, 연평균 61.5%↑...2022년 3500억원 규모 (2019.12.26)

  (http://www.thebchain.co.kr/news/articleView.html?idxno=7149)





### 부정적 입장

---

#### 규제 샌드박스 효과 및 ICO 허용

- 규제 샌드박스 효과?...블록체인은 여전히 안개 속 (19.3.22)

  (http://www.thebchain.co.kr/news/articleView.html?idxno=3766)



#### 블록체인 네트워크 분류, 개인정보 관리문제

- 블록체인 네트워크 분류, 개인정보 관리문제 여전히 문제 (19.12.18)

  (http://www.thebchain.co.kr/news/articleView.html?idxno=6483)



### 전 세계의 블록체인 시장

---

- #### 중국

  - 2019년 12월 9일 기준
  - 11월에 열린 'IFF영구회의장기공식'에서 중국 광저우시, 블록체인 기업에 10억위안 투자 결정
  - (민감한 문제인) ICO(암호화폐공개)/ STO 관련해서는 정해진 바가 없음
  - 블록체인 해설서 발간 / 연맹 확장
  - 블록체인 기반 채권 발행(200억 위안, 중국 최초의 채권 발행임) 
    - 온라인에서 발행 절차를 따르며, 이 과정에서 생기는 문서 및 정보가 블록체인에 기록

  

- #### 전 세계 개발자들은 비트코인을 어떻게 생각할까?

  - Stack Overflow 에서 설문

  - 블록체인은 OOO이다?

    - 1위 : 데이터 저장을 영원히 기록하기에는 좋은 것 같다
    - 2위 : 다양한 영역에서 큰 도움을 주는 엄청난 기술
    - 기타 : 그냥 유행 / 암호화폐 / 무책임한(irresponsible) 기술

    

  - 일반 코딩 기술과 비교하면 블록체인은?

    - 5년차 이하는 80%가 useful하다고 생각함

    - 30~40연차는 60%이하가 useful하다고 생각함

    - 개발 연차가 높아질수록 passing fad, irresponsible이 높아졌으나 과반 이상이 useful에 동의

      

### 블록체인과 해킹

---

####  심준보 화이트해커연합(HARU) 이사장

  (https://www.thebchain.co.kr/news/articleView.html?idxno=1220)

- 현존하는 블록체인은 "탈중앙화(decentralization), 확장성(scability), 보안(security) 요건을 충족하지 못하고 있어 해킹이 가능하다"고 함

- 암호화폐는 거래소가 은행의 역할을 하므로 분산된 정보가 아닌 거래소를 공격하여 사실상 정보를 탈취할 수 있음

  - 특히 해킹 경험이 축적된 은행 및 공공기관과 달리, 아직 경험이 부족한 거래소는 보안에 취약

- 51% 공격의 실현가능성 有 / 중국이 전체 채굴량의 81%를 차지하여 옳다고 여겨지는 블록을 무효화시켜 해킹에 활용할 수도 있음

- 개발자가 잘못 디자인해 알고리즘이 무너질 수도 있음

- 이전 리눅스를 해킹했던 방법과 동일하게 우회적으로 채굴자를 공격하는 방안

  - 직원에게 '.acr' 확장자가 있는 메일을 보내 고객정보를 탈취한 인터파크의 사례 + 빗썸 사태



####  류재철 충남대 교수

  (https://www.thebchain.co.kr/news/articleView.html?idxno=962)

- 다수의 암호화폐 거래소가 다수의 개인키 소지 및 내부 DB로 기록 제거 및 빠른 거래

  - 단 이는 해킹시에도 해커의 발자취를 찾기 어려움
  - 이를 해결하기 위해 거래소들이 콜드월렛과 핫월렛에 70:30으로 분리 보관중이나, 제대로된 망 분리가 쉽지 않음

- 탈중앙화 거래소 역시 해킹 가능성 有

  - 거래소 보안 문제로 사용자가 자신의 키를 지갑에 들고 있는 거래 시스템인 '탈중앙화 거래소'가 나오고 있지만, 스마트 컨트랙트 프로그램의 오류로 인해 탈중앙화 거래소도 해킹을 당할 수 있음

- 개인키 보관용 하드웨어 월렛이 중요해질 것 / 구동시키는 지갑의 디바이스 보안이 중요



####  스마트 컨트랙트 오딧(Audit) 전문업체 해치랩스 김종호 대표

  (https://www.thebchain.co.kr/news/articleView.html?idxno=1168)

- 스마트 컨트랙트 : 계약 조건에 부합하면 제 3자 개입 없이 소프트웨어 코드에 의해 계약 실행

  - 블록체인 기반 애플리케이션인 디앱(DApp)의 핵심 중 하나

  - 스마트 컨트랙트는 한번 저장되면 위변조가 어려운 블록체인 네트워크와 맞물려 돌아감

    ​	→  한번 배포하면 사실상 수정이 불가능

- 스마트 컨트랙트는 기존 SW 프로그래밍과 다른 패러다임이므로 산업 초기 단계이므로 에러가 상대적으로 많이 나올 수 있음

- ##### DApp이 가장 많이 올라간 이더리움은 '가스(Gas)' 가 변수로 등장

  - ##### Gas : 이더리움 블록체인 상에서 거래를 할 때 사용자가 지불하는 수수료 개념

  - 트랜잭션 한 번에 최대로 쓸 수 있는 가스량(block gas limit) 이 정해져 있음

    - 이전 프로그래밍 스타일에 익숙해진 개발자들에겐 장벽이 될 수 있음

  - 하나의 트랜잭션에 block gas limit보다 많은 gas를 쓰도록 프로그래밍했다면, 이 트랜잭션은 영원히 블록에 담길 수 없는 것 >>> gas limit을 초과하는 설계를 했다면 돈이 묶이게 됨

  - 가스 최적화 : 가스를 적게 쓰면서도 원하는 프로그램을 만드는 것이 핵심

- 스마트 컨트랙트는 개발자 Pool이 좁아 에러가 많지만, 한번 실수로 감당해야 할 충격이 매우 큼

  - 반복적인 에러는 금전적인 손실 뿐 아니라 블록체인 생태계 전반에 걸쳐 신뢰의 위기
  - 따라서, 스마트 컨트랙트의 무결성을 체크하는 것이 중요

- EVM (Ethereum Virtual Machine)

  - 스마트 컨트랙트가 돌아가는 환경
  - 환경에 대한 이해를 명확히 한 후 개발에 착수하는 것이 중요함